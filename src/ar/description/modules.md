# وحدات التطبيق

## الوحدات الرئيسية

يتكون التطبيق من ثلاث وحدات:
- `dv-merchant` - تتضمن هذه الوحدة خادم ويب، وواجهة أمامية لعرض نموذج الدفع ولوحة التحكم، وكود التفاعل مع البورصات الخارجية، بالإضافة إلى منطق الأعمال الكامل لإنشاء المشاريع، ومحافظ العملاء، وإرسال خطافات الويب إلى المتجر، وقواعد إعادة توجيه العملات المشفرة المستلمة.
- `dv-processing` - تقوم هذه الوحدة بتخزين العبارات الأولية وتوقيع المعاملات نيابة عن `dv-merchant`.
- `dv-updater` - هذه الوحدة مسؤولة عن التحديث التلقائي ويتم التحكم فيها من `dv-merchant`.

## حزم إضافية

يوجد في النظام البيئي أيضًا حزم `dv-env` لأنظمة تشغيل مختلفة، والتي تتضمن `postgres` و `redis` مجمعة بطريقة خاصة وقابلة للتكوين تلقائيًا.

## نشر التطبيقات وحقوق المستخدمين

يتم تثبيت جميع الوحدات في الدليل `/home/dv`، ويتم إنشاء مستخدم `dv:dv` في نظام التشغيل. بالنسبة لـ `postgres` و `redis` المثبتتين باستخدام حزمة `dv-env`، يتم الاحتفاظ بمستخدميهما الأصليين، لكنهما يعملان على منافذ غير قياسية: `postgres`: `5433`، `redis`: `6380`. يتم توفير التشغيل التلقائي للخدمات من خلال `systemd`.